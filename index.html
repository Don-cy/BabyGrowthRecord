<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="light">
    <meta name="supported-color-schemes" content="light">
    <meta name="renderer" content="webkit">
    <title>å®å®æˆé•¿è®°å½•</title>
    <style>
        :root { color-scheme: light; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: #fff0f5 !important; 
            background-image: linear-gradient(180deg, #fff0f5 0%, #e6f7ff 100%) !important;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; margin: 0; color: #444;
            -webkit-tap-highlight-color: transparent;
        }
        .container {
            background-color: #ffffff; padding: 25px; border-radius: 24px;
            box-shadow: 0 10px 40px rgba(180, 150, 160, 0.4);
            text-align: center; width: 85%; max-width: 400px;
            border: 4px solid #fff; position: relative; z-index: 10;
        }
        .photo-wrapper {
            position: relative; width: 120px; height: 120px;
            margin: -60px auto 15px auto; border-radius: 50%;
            border: 4px solid #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background-color: #f0f0f0; overflow: hidden; cursor: pointer;
            -webkit-transform: translateZ(0);
            -webkit-mask-image: -webkit-radial-gradient(white, black);
        }
        #babyPhoto { width: 100%; height: 100%; object-fit: cover; display: block; }
        .photo-placeholder {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            color: #aaa; font-size: 0.8rem; background: #f8f8f8;
            text-align: center; line-height: 1.2; padding: 10px;
        }
        #fileInput { display: none; }
        .name-input {
            border: none; border-bottom: 2px solid #ffd1d1;
            text-align: center; font-size: 1.5rem; font-weight: bold;
            color: #555; width: 80%; margin-bottom: 20px;
            background: transparent; outline: none; padding: 5px; border-radius: 0;
        }
        .name-input:focus { border-bottom-color: #ff9a9e; }
        .input-group {
            background: #f9f9f9; padding: 15px; border-radius: 12px;
            margin-bottom: 20px; text-align: left;
        }
        label { font-size: 0.85rem; color: #888; margin-bottom: 5px; display: block; }
        input[type="date"] {
            width: 100%; padding: 8px; border: 1px solid #eee;
            border-radius: 8px; font-size: 1rem; box-sizing: border-box;
            margin-bottom: 10px; background: #fff; -webkit-appearance: none;
        }
        .time-row { display: flex; align-items: center; justify-content: space-between; }
        .time-box {
            flex: 1; display: flex; align-items: center;
            background: #fff; border: 1px solid #eee;
            border-radius: 8px; padding: 5px 10px;
        }
        .time-box input {
            border: none; width: 100%; font-size: 1.2rem;
            text-align: center; outline: none; color: #444; background: transparent;
        }
        .colon { margin: 0 10px; font-weight: bold; color: #ccc; }
        #result {
            background: linear-gradient(135deg, #fff6f6 0%, #fff 100%);
            border: 2px dashed #ffd1d1; border-radius: 15px;
            padding: 20px; min-height: 80px;
        }
        .age-main { color: #ff7eb3; font-size: 1.2rem; font-weight: bold; margin-bottom: 8px; }
        .age-sub { color: #888; font-size: 1rem; }
        .number-highlight {
            font-size: 1.6rem; color: #ff5e62; margin: 0 2px;
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', sans-serif;
        }
        .total-days-badge {
            display: inline-block; margin-top: 15px; padding: 6px 18px;
            background-color: #ffe6ea; color: #ff5e62;
            border-radius: 20px; font-size: 0.95rem; font-weight: bold;
            border: 1px solid #ffccd5;
        }
        .tips { font-size: 0.7rem; color: #bbb; margin-top: 10px; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
        
        /* æŒ‰é’®ä¸å¼¹çª—æ ·å¼ */
        .info-btn {
            background: none; border: none; color: #ff9a9e;
            font-size: 0.8rem; margin-top: 15px; text-decoration: underline;
            cursor: pointer; padding: 5px;
        }
        .modal {
            display: none; position: fixed; z-index: 999; left: 0; top: 0;
            width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(3px); animation: fadeIn 0.3s;
        }
        .modal-content {
            background-color: #fff; margin: 5% auto; padding: 25px;
            border: 1px solid #ffe6ea; width: 85%; max-width: 500px;
            border-radius: 20px; box-shadow: 0 15px 50px rgba(0,0,0,0.2);
            text-align: left; position: relative; max-height: 80vh; overflow-y: auto;
        }
        .close-btn {
            color: #aaa; float: right; font-size: 28px; font-weight: bold;
            cursor: pointer; margin-top: -10px; margin-right: -10px;
        }
        .modal-content h2 { 
            color: #ff5e62; font-size: 1.1rem; margin-top: 0; text-align: center;
            border-bottom: 2px solid #fff0f5; padding-bottom: 10px;
        }
        .modal-content h3 { 
            color: #444; font-size: 0.95rem; margin-top: 20px; margin-bottom: 8px;
            border-left: 4px solid #ff9a9e; padding-left: 8px;
        }
        .modal-content p, .modal-content li { 
            color: #666; font-size: 0.85rem; line-height: 1.6; text-align: justify;
        }
        .modal-content ul, .modal-content ol { padding-left: 20px; margin: 5px 0; }
        .security-box { 
            background: #fff0f5; padding: 12px; border-radius: 8px;
            border: 1px solid #ffccd5; margin-bottom: 15px;
        }
        .security-title { font-weight: bold; color: #d64545; font-size: 0.9rem; margin-bottom: 5px; }
        .security-text { color: #d64545; font-size: 0.85rem; line-height: 1.5; }
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
    </style>
</head>
<body>

<div class="container">
    <input type="file" id="fileInput" accept="image/*">
    <div class="photo-wrapper" onclick="document.getElementById('fileInput').click()">
        <img id="babyPhoto" style="display:none;" alt="å®å®ç…§ç‰‡">
        <div id="photoPlaceholder" class="photo-placeholder">ç‚¹å‡»ä¸Šä¼ <br>å®å®ç…§ç‰‡</div>
    </div>
    <input type="text" id="babyName" class="name-input" placeholder="è¾“å…¥å®å®å§“å">
    <div class="input-group">
        <label>å‡ºç”Ÿæ—¥æœŸä¸æ—¶é—´</label>
        <input type="date" id="dateIn">
        <div class="time-row">
            <div class="time-box">
                <input type="number" id="hourIn" placeholder="12" min="0" max="23">
                <span style="font-size:0.8rem; color:#aaa;">æ—¶</span>
            </div>
            <div class="colon">:</div>
            <div class="time-box">
                <input type="number" id="minIn" placeholder="00" min="0" max="59">
                <span style="font-size:0.8rem; color:#aaa;">åˆ†</span>
            </div>
        </div>
    </div>
    <div id="result"><div style="color:#ccc; padding-top:10px;">è¯·è¾“å…¥å‡ºç”Ÿä¿¡æ¯...</div></div>
    <div class="tips">* ä¿¡æ¯å’Œç…§ç‰‡ä»…ä¿å­˜åœ¨æ‚¨çš„æ‰‹æœºæœ¬åœ°</div>
    <button id="infoBtn" class="info-btn">ğŸ“– ä½¿ç”¨è¯´æ˜ä¸å®‰å…¨å£°æ˜</button>
</div>

<div id="infoModal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>ğŸ‘¶ å®å®æˆé•¿è®°å½•ä¸æ—¶å…‰è®¡ç®—å™¨<br><span style="font-size:0.8em; font-weight:normal; color:#888">(çº¯å‡€éšç§ç‰ˆ)</span></h2>
        
        <div class="security-box">
            <div class="security-title">ğŸ›¡ï¸ é¡¹ç›®å®‰å…¨æ ¸å¿ƒå£°æ˜</div>
            <div class="security-text">
                æœ¬å·¥å…·é‡‡ç”¨ 100% çº¯å‰ç«¯æ¶æ„è®¾è®¡ï¼Œæ‰¿è¯ºâ€œæ•°æ®é›¶ä¸Šä¼ â€ã€‚<br>
                æ‰€æœ‰ç…§ç‰‡ã€å§“åã€å‡ºç”Ÿæ—¥æœŸç­‰æ•æ„Ÿä¿¡æ¯ä»…ä¿å­˜åœ¨ç”¨æˆ·<strong>å½“å‰çš„æ‰‹æœº/ç”µè„‘æµè§ˆå™¨ç¼“å­˜</strong>ä¸­ï¼Œç»ä¸ä¼šç»è¿‡ä»»ä½•æœåŠ¡å™¨ï¼Œä¹Ÿä¸ä¼šè¢«å¼€å‘è€…æˆ–ç¬¬ä¸‰æ–¹è·å–ã€‚æ‚¨çš„æ•°æ®ï¼Œåªå±äºæ‚¨è‡ªå·±ã€‚
            </div>
        </div>

        <h3>ğŸ“– é¡¹ç›®ç®€ä»‹</h3>
        <p>è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºæ–°æ‰‹çˆ¶æ¯è®¾è®¡çš„è½»é‡çº§ç½‘é¡µåº”ç”¨ã€‚å®ƒæ‘’å¼ƒäº†ä¼ ç»Ÿ App éœ€è¦æ³¨å†Œç™»å½•ã€ä¸Šä¼ æ•°æ®çš„ç¹çæµç¨‹ï¼Œæä¾›äº†ä¸€ä¸ªå³å¼€å³ç”¨ã€ç²¾ç¡®åˆ°åˆ†é’Ÿçš„å®å®å¹´é¾„è®¡ç®—å™¨ã€‚ç•Œé¢é‡‡ç”¨æ¸©é¦¨çš„æ¨±èŠ±ç²‰è‰²è°ƒï¼Œä¸ä»…èƒ½å®æ—¶æ˜¾ç¤ºå®å®çš„ç²¾ç¡®å¹´é¾„ï¼ˆå²/æœˆ/å¤©/æ—¶/åˆ†ï¼‰ï¼Œè¿˜èƒ½è‡ªåŠ¨è®¡ç®—â€œå·²å‡ºç”Ÿæ€»å¤©æ•°â€ï¼ˆå¦‚ç™¾å¤©çºªå¿µï¼‰ã€‚</p>

        <h3>âœ¨ æ ¸å¿ƒåŠŸèƒ½</h3>
        <ul>
            <li><strong>ğŸ“¸ æœ¬åœ°åŒ–ç…§ç‰‡è®°å¿†</strong>ï¼šæ”¯æŒç”¨æˆ·ä¸Šä¼ å®å®ç…§ç‰‡ï¼Œç³»ç»Ÿè‡ªåŠ¨è£å‰ªä¸ºåœ†å½¢å¤´åƒã€‚<br><span style="color:#999;font-size:0.8em">æŠ€æœ¯äº®ç‚¹ï¼šä½¿ç”¨ HTML5 Canvas æŠ€æœ¯åœ¨æœ¬åœ°å‹ç¼©å›¾ç‰‡ï¼Œå¹¶è½¬ç ä¸º Base64 å­—ç¬¦ä¸²å­˜å…¥æµè§ˆå™¨ localStorageã€‚å›¾ç‰‡ä»æœªç¦»å¼€è¿‡æ‚¨çš„è®¾å¤‡ã€‚</span></li>
            <li><strong>â±ï¸ ç²¾å‡†æ—¶å…‰è®¡ç®—</strong>ï¼šè‡ªåŠ¨å¤„ç†é—°å¹´ã€å¤§å°æœˆé€»è¾‘ã€‚å®æ—¶è®¡ç®—å¹¶æ˜¾ç¤ºï¼šXå² Xä¸ªæœˆ Xå¤© Xå°æ—¶ Xåˆ†ã€‚</li>
            <li><strong>ğŸ¨ æè‡´ä½“éªŒè®¾è®¡</strong>ï¼šæ¨±èŠ±ç²‰ä¸»é¢˜ï¼Œæ¸©é¦¨æ²»æ„ˆã€‚å†…ç½®å¼ºåˆ¶æµ…è‰²æ¨¡å¼ç­–ç•¥ï¼Œé˜²æ­¢æµè§ˆå™¨å¼ºåˆ¶ä¿®æ”¹èƒŒæ™¯è‰²ã€‚</li>
            <li><strong>ğŸ’¾ æ™ºèƒ½æ•°æ®æŒä¹…åŒ–</strong>ï¼šè‡ªåŠ¨ä¿å­˜è¾“å…¥çš„åå­—ã€æ—¥æœŸå’Œç…§ç‰‡ã€‚å³ä½¿å…³é—­ç½‘é¡µæˆ–é‡å¯æ‰‹æœºï¼Œä¸‹æ¬¡æ‰“å¼€æ—¶æ•°æ®ä¾ç„¶å­˜åœ¨ï¼ˆä¾èµ–æµè§ˆå™¨ç¼“å­˜ï¼‰ã€‚</li>
        </ul>

        <h3>ğŸ”’ æ•°æ®å®‰å…¨ä¸éšç§è¯¦è§£</h3>
        <p>å¾ˆå¤šå®¶é•¿æ‹…å¿ƒå®å®çš„ç…§ç‰‡ä¸Šä¼ åˆ°ç½‘ç»œä¼šè¢«æ³„éœ²ï¼Œ<strong>æœ¬é¡¹ç›®ä»æŠ€æœ¯åº•å±‚å½»åº•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</strong></p>
        <ul>
            <li><strong>ğŸš« æ— åç«¯æœåŠ¡å™¨</strong>ï¼šæœ¬é¡¹ç›®æ²¡æœ‰åå°æ•°æ®åº“ï¼Œæ²¡æœ‰æœåŠ¡å™¨æ¥æ”¶æ•°æ®ã€‚å®ƒå°±åƒæ‚¨æ‰‹æœºé‡Œçš„â€œè®¡ç®—å™¨â€App ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªçº¯ç²¹çš„å·¥å…·ã€‚</li>
            <li><strong>ğŸ”’ æ²™ç›’å­˜å‚¨æœºåˆ¶</strong>ï¼šæ•°æ®å­˜å‚¨ä½¿ç”¨æµè§ˆå™¨çš„ Local Storage æŠ€æœ¯ã€‚è¿™æ„å‘³ç€ï¼š
                <ul>
                    <li><strong>æ•°æ®éš”ç¦»</strong>ï¼šåªæœ‰æ‚¨å½“å‰ä½¿ç”¨çš„è¿™å°æ‰‹æœºèƒ½çœ‹åˆ°è¿™äº›ä¿¡æ¯ã€‚</li>
                    <li><strong>æ— æ³•å…±äº«</strong>ï¼šå³ä½¿æ‚¨æŠŠç”Ÿæˆçš„ç½‘å€å‘ç»™äº²å‹ï¼Œä»–ä»¬æ‰“å¼€ä¹Ÿæ˜¯ç©ºç™½çš„ï¼ˆå› ä¸ºæ•°æ®åœ¨æ‚¨çš„æ‰‹æœºé‡Œï¼Œä¸åœ¨ç½‘å€é‡Œï¼‰ã€‚</li>
                    <li><strong>ç»å¯¹ç§å¯†</strong>ï¼šé™¤éæœ‰äººç‰©ç†æ¥è§¦å¹¶è§£é”æ‚¨çš„æ‰‹æœºï¼Œå¦åˆ™æ²¡äººèƒ½çœ‹åˆ°è¿™äº›æ•°æ®ã€‚</li>
                </ul>
            </li>
        </ul>

        <h3>ğŸ› ï¸ æŠ€æœ¯æ ˆ</h3>
        <p>æ ¸å¿ƒè¯­è¨€ï¼šHTML5, CSS3, JavaScript (ES6+)<br>
        å­˜å‚¨æŠ€æœ¯ï¼šWeb Storage API (localStorage)<br>
        å›¾åƒå¤„ç†ï¼šCanvas API (ç”¨äºå‰ç«¯å›¾ç‰‡å‹ç¼©ä¸è½¬ç )<br>
        éƒ¨ç½²æ–¹å¼ï¼šé™æ€é¡µé¢éƒ¨ç½² (Static Hosting)</p>

        <h3>ğŸ“± å¦‚ä½•ä½¿ç”¨</h3>
        <ol>
            <li><strong>æ‰“å¼€é“¾æ¥</strong>ï¼šåœ¨æµè§ˆå™¨ä¸­è®¿é—®é¡¹ç›®ç½‘å€ã€‚</li>
            <li><strong>ä¸Šä¼ ç…§ç‰‡</strong>ï¼šç‚¹å‡»é¡¶éƒ¨çš„åœ†å½¢åŒºåŸŸï¼Œé€‰æ‹©ä¸€å¼ å®å®çš„å¯çˆ±ç…§ç‰‡ï¼ˆç…§ç‰‡ä»…æœ¬åœ°æ˜¾ç¤ºï¼‰ã€‚</li>
            <li><strong>è¾“å…¥ä¿¡æ¯</strong>ï¼šå¡«å†™å®å®çš„å°åã€å‡ºç”Ÿæ—¥æœŸå’Œå…·ä½“æ—¶é—´ã€‚</li>
            <li><strong>æŸ¥çœ‹ç»“æœ</strong>ï¼šé¡µé¢ä¼šè‡ªåŠ¨ç”Ÿæˆå®å®çš„ç²¾ç¡®å¹´é¾„å’Œç´¯è®¡å¤©æ•°ã€‚</li>
            <li><strong>è‡ªåŠ¨ä¿å­˜</strong>ï¼šæ— éœ€ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œè¾“å…¥å³ä¿å­˜ã€‚</li>
        </ol>

        <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
        <p>ç”±äºæ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨çš„æœ¬åœ°ç¼“å­˜ä¸­ï¼Œè¯·æ³¨æ„ä»¥ä¸‹æƒ…å†µå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼ˆéœ€é‡æ–°è¾“å…¥ï¼‰ï¼š</p>
        <ul>
            <li>æ‰‹åŠ¨æ¸…ç†äº†æµè§ˆå™¨çš„ç¼“å­˜/å†å²è®°å½•ã€‚</li>
            <li>ä½¿ç”¨äº†â€œæ— ç—•æµè§ˆ/éšç§æ¨¡å¼â€æ‰“å¼€ç½‘é¡µã€‚</li>
            <li>å¸è½½å¹¶é‡æ–°å®‰è£…äº†æµè§ˆå™¨ Appã€‚</li>
        </ul>
    </div>
</div>

<script>
    const els = {
        name: document.getElementById('babyName'),
        date: document.getElementById('dateIn'),
        hour: document.getElementById('hourIn'),
        min: document.getElementById('minIn'),
        result: document.getElementById('result'),
        photo: document.getElementById('babyPhoto'),
        placeholder: document.getElementById('photoPlaceholder'),
        fileIn: document.getElementById('fileInput')
    };

    // å¼¹çª—é€»è¾‘
    const modal = document.getElementById("infoModal");
    const btn = document.getElementById("infoBtn");
    const span = document.getElementsByClassName("close-btn")[0];
    btn.onclick = function() { modal.style.display = "block"; }
    span.onclick = function() { modal.style.display = "none"; }
    window.onclick = function(event) { if (event.target == modal) modal.style.display = "none"; }

    window.onload = function() {
        loadData(); setInterval(calculateAge, 30000); 
    };
    [els.name, els.date, els.hour, els.min].forEach(el => {
        el.addEventListener('input', () => { saveData(); calculateAge(); });
    });
    els.fileIn.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(event) {
            const img = new Image();
            img.src = event.target.result;
            img.onload = function() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const MAX_SIZE = 300; 
                let width = img.width; let height = img.height;
                if (width > height) { if (width > MAX_SIZE) { height *= MAX_SIZE / width; width = MAX_SIZE; } } 
                else { if (height > MAX_SIZE) { width *= MAX_SIZE / height; height = MAX_SIZE; } }
                canvas.width = width; canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);
                const dataURL = canvas.toDataURL('image/jpeg', 0.7);
                localStorage.setItem('baby_photo_data', dataURL); displayPhoto(dataURL);
            }
        };
        reader.readAsDataURL(file);
    });

    function displayPhoto(src) {
        if(src) { els.photo.src = src; els.photo.style.display = 'block'; els.placeholder.style.display = 'none'; }
    }
    function saveData() {
        const data = { name: els.name.value, date: els.date.value, hour: els.hour.value, min: els.min.value };
        localStorage.setItem('baby_info_data', JSON.stringify(data));
    }
    function loadData() {
        const saved = localStorage.getItem('baby_info_data');
        if (saved) {
            const data = JSON.parse(saved);
            els.name.value = data.name || ''; els.date.value = data.date || '';
            els.hour.value = data.hour || ''; els.min.value = data.min || '';
            calculateAge(); 
        }
        const photoData = localStorage.getItem('baby_photo_data');
        if (photoData) displayPhoto(photoData);
    }
    function calculateAge() {
        const dVal = els.date.value;
        if (!dVal) return;
        const hVal = parseInt(els.hour.value) || 0; const mVal = parseInt(els.min.value) || 0;
        const birthDate = new Date(`${dVal}T00:00:00`);
        birthDate.setHours(hVal); birthDate.setMinutes(mVal);
        const now = new Date();
        if (birthDate > now) { els.result.innerHTML = '<span style="color:#ff6b6b">æ—¶é—´è®¾ç½®åœ¨æœªæ¥äº†å“¦~</span>'; return; }

        let years = now.getFullYear() - birthDate.getFullYear();
        let months = now.getMonth() - birthDate.getMonth();
        let days = now.getDate() - birthDate.getDate();
        let hours = now.getHours() - birthDate.getHours();
        let minutes = now.getMinutes() - birthDate.getMinutes();

        if (minutes < 0) { minutes += 60; hours--; }
        if (hours < 0) { hours += 24; days--; }
        if (days < 0) {
            const prevMonth = new Date(now.getFullYear(), now.getMonth(), 0);
            days += prevMonth.getDate(); months--;
        }
        if (months < 0) { months += 12; years--; }

        const diffTime = now.getTime() - birthDate.getTime();
        const totalDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        const name = els.name.value ? els.name.value : 'å®å®';

        els.result.innerHTML = `
            <div class="age-main">${name}å·²ç»</div>
            <div style="margin-bottom:10px;">
                <span class="number-highlight">${years}</span>å²
                <span class="number-highlight">${months}</span>ä¸ªæœˆ
                <span class="number-highlight">${days}</span>å¤©
            </div>
            <div class="age-sub">
                <span class="number-highlight" style="font-size:1.2rem">${pad(hours)}</span>å°æ—¶
                <span class="number-highlight" style="font-size:1.2rem">${pad(minutes)}</span>åˆ†
            </div>
            <div class="total-days-badge">å·²å‡ºç”Ÿ ${totalDays} å¤©</div>
        `;
    }
    function pad(n) { return n < 10 ? '0' + n : n; }
</script>
</body>
</html>
